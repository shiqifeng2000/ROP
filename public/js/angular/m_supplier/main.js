"use strict";require.config(Constant.requires);var app=angular.module("supplier",["ui.router","ngAnimate","ngCookies","ngMaterial","ngMessages","supplier.controllers","rop.directives","rop.filters","rop.services"]);app.config(["$provide","$logProvider","$compileProvider",function($provide,$logProvider,$compileProvider){$logProvider.debugEnabled(!1),$compileProvider.debugInfoEnabled(!1)}]).config(function($mdThemingProvider){var customBlueMap=$mdThemingProvider.extendPalette("cyan",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"ffffff",100:"70e1d0",300:"00C8AB",500:"00C5A3",800:"00A589",A100:"EEFCFF"});$mdThemingProvider.definePalette("customBlue",customBlueMap),$mdThemingProvider.theme("default").primaryPalette("customBlue",{"default":"500","hue-1":"50","hue-2":"800","hue-3":"A100"}).accentPalette("pink");var greyMap=$mdThemingProvider.extendPalette("grey",{contrastDefaultColor:"light",contrastDarkColors:["50"],contrastLightColors:["300","500","800","A100"],50:"FFFFFF",300:"35383B",500:"2b2b2b",800:"212121",A100:"000000"});$mdThemingProvider.definePalette("amazingPaletteName",greyMap),$mdThemingProvider.theme("dracular").primaryPalette("amazingPaletteName",{"default":"500","hue-1":"50","hue-2":"300","hue-3":"800"}).dark();var greyMap1=$mdThemingProvider.extendPalette("grey",{contrastDefaultColor:"light",contrastDarkColors:["50"],contrastLightColors:["300","500","800","A100"],50:"FFFFFF",300:"35383B",500:"FAFAFA",800:"212121",A100:"000000"});$mdThemingProvider.definePalette("amazingPaletteName1",greyMap1),$mdThemingProvider.theme("cooler").primaryPalette("amazingPaletteName1",{"default":"50","hue-1":"50","hue-2":"300","hue-3":"800"}).warnPalette("teal").dark()}).config(function($mdIconProvider){$mdIconProvider.iconSet("action","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-action.svg",24).iconSet("alert","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-alert.svg",24).iconSet("av","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-av.svg",24).iconSet("communication","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-communication.svg",24).iconSet("content","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-content.svg",24).iconSet("device","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-device.svg",24).iconSet("editor","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-editor.svg",24).iconSet("file","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-file.svg",24).iconSet("hardware","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-hardware.svg",24).iconSet("image","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-image.svg",24).iconSet("maps","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-maps.svg",24).iconSet("navigation","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-navigation.svg",24).iconSet("notification","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-notification.svg",24).iconSet("social","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-social.svg",24).iconSet("toggle","/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-toggle.svg",24).defaultIconSet("/vendor/material-design-icons/sprites/svg-sprite/svg-sprite-action.svg",24)}).config(["$stateProvider","$urlRouterProvider","$locationProvider","$urlMatcherFactoryProvider",function($stateProvider,$urlRouterProvider,$locationProvider,$urlMatcherFactoryProvider){$urlMatcherFactoryProvider.caseInsensitive(!0),$urlMatcherFactoryProvider.strictMode(!1),$stateProvider.state("index",{templateUrl:"/_view/supplier/index",url:"/supplier/home",controller:"IndexCtrl",resolve:{_preLoading:["$rootScope",function($rootScope){return $rootScope.preloadingPromise}]},onEnter:["$rootScope",function($rootScope){$rootScope.tab={key:"index",des:"ROP供应商"+(window.ssv_info&&window.ssv_info.ssv_name||"")+"主页面"}}]}).state("login",{url:"/supplier/login",templateUrl:"/_view/supplier/login",params:{fromState:"index"},resolve:{_preLoading:["$rootScope",function($rootScope){return $rootScope.preloadingPromise}]},onEnter:["$rootScope",function($rootScope){$rootScope.tab={key:"login",des:"ROP供应商"+(window.ssv_info&&window.ssv_info.ssv_name||"")+"登录页面"}}],controller:"LoginCtrl"}),$urlRouterProvider.when(/\/api\/.+\.html/i,"/supplier/document"),$urlRouterProvider.otherwise("/supplier/home"),$locationProvider.html5Mode(!0),$locationProvider.hashPrefix("!")}]),app.run(["$rootScope","$state","$mdSidenav","$location","$window","$http","$cookies","$mdDialog","$mdUtil","$mdMedia","$q","ScopeInitializer",function($rootScope,$state,$mdSidenav,$location,$window,$http,$cookies,$mdDialog,$mdUtil,$mdMedia,$q,ScopeInitializer){$rootScope.nav_menu={},angular.extend($rootScope,ScopeInitializer),$rootScope.logout=function(){return ScopeInitializer.logout(function(){$rootScope.profile=void 0})},$rootScope.ssv_user_id=$location.search().ssv_user_id,$rootScope.loginMistakes=0,$rootScope._timestamp=(new Date).getTime();var getInfo=function(){return $http.post("/agent",{module:"supplier",partial:"index",api:"get_info",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){body.data&&($rootScope.user_info=body.data.user_info)},function(why){$rootScope.warn(why)})},getSystemHints=function(){return $http.post("/agent",{module:"common",partial:"common",api:"tips"}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?$rootScope.systemHints=body.data.data_list:$rootScope.warn(body.data.msg)},function(why){$rootScope.alert(why)})};$rootScope.favor=function(){$http.post("/agent",{module:"supplier",partial:"session",api:"favor",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?(!$rootScope.ssv_intro&&($rootScope.ssv_intro={}),$rootScope.ssv_intro.favo_status="1"):$rootScope.alert(body.data)},function(why){$rootScope.alert(why)})},$rootScope.request=function(){$http.post("/agent",{module:"supplier",partial:"session",api:"request",param:{ssv_user_id:$rootScope.ssv_user_id}}).then(function(body){"boolean"==typeof body.data.is_success&&body.data.is_success||"string"==typeof body.data.is_success&&"true"==body.data.is_success?(!$rootScope.ssv_intro&&($rootScope.ssv_intro={}),$rootScope.ssv_intro.apply_status="2"):$rootScope.alert(body.data)},function(why){$rootScope.alert(why)})},$rootScope.scrollToTop=function(cb){"Firefox"==ScopeInitializer.browserType?angular.element("html").animate({scrollTop:0},cb):angular.element("body").animate({scrollTop:0},cb)},$rootScope.isAdmin=function(){return $rootScope.profile&&("0"==$rootScope.profile.login_user_type||"3"==$rootScope.profile.login_user_type)},$rootScope.isSsv=function(){return $rootScope.profile&&"2"==$rootScope.profile.login_user_type},$rootScope.isIsv=function(){return $rootScope.profile&&"1"==$rootScope.profile.login_user_type},$rootScope.toConsole=function(){$rootScope.isSsv()?$rootScope.toPlatform("application"):$rootScope.isAdmin()?$rootScope.toPlatform("console"):$rootScope.isIsv&&$rootScope.toPlatform("dashboard")},$rootScope.toggleSidenav=function(){return $mdSidenav("right").toggle()},$rootScope.closeSidenav=function(e){return e&&e.stopPropagation(),$mdSidenav("right").close()},$rootScope.toggleLogin=function(){$rootScope.profile||($rootScope.selectedSidenavFunc=$rootScope.selectedSidenavFunc?0:1)},$rootScope.toLogin=function(from){return $rootScope.go("login",{fromState:from})},$rootScope.init=function(){var _session=$cookies.get("_session")?JSON.parse($cookies.get("_session")):"",id=document.querySelector("meta[name=session]").content;_session&&id==_session.id?($rootScope.profile=_session,$rootScope.preloadingPromise.then(getSystemHints)):(window.rxStream&&window.rxStream.userIdentify(),$cookies.remove("_session",{path:"/",domain:""+(Constant.nosubdomain?"":".")+Constant.host}),$rootScope.profile=void 0),window.ssv_info?($rootScope.ssv_user_id=window.ssv_info.ssv_id,$rootScope.ssv_info=window.ssv_info,$rootScope.preloadComplete=$rootScope.preloadingPromise.then(getInfo).then(function(){window.ssv_info.method&&$rootScope.go("document."+window.ssv_info.method,{id:window.ssv_info.id,cat_id:window.ssv_info.cat_id,cat_name:window.ssv_info.cat_name})})):$rootScope.toPlatform("/")},$rootScope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams){$mdSidenav("right").close()}),$rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){window.rxStream&&window.rxStream.track("rop_page_click",{properties:{b_rop_page_name:$rootScope.tab&&$rootScope.tab.des||"未知页面",b_rop_login_status:void 0!=$rootScope.profile,b_rop_login_user:$rootScope.profile&&$rootScope.profile.login_user_name||""}})})}]),angular.bootstrap(document,["supplier"]);