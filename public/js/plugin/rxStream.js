!function e(t,n,o){function r(s,c){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n||e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(require,module,exports){var toString=Object.prototype.toString;module.exports="object"==typeof JSON&&"[object JSON]"===toString.call(JSON)?JSON:function(JSON){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function objectToJSON(e){switch(toString.call(e)){case"[object Date]":return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null;case"[object Boolean]":case"[object String]":case"[object Number]":return e.valueOf()}return e}function str(e,t){var n,o,r,i,s,c=gap,a=t[e];switch(a&&"object"==typeof a&&(a=objectToJSON(a)),"function"==typeof rep&&(a=rep.call(t,e,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,s=[],"[object Array]"===toString.call(a)){for(i=a.length,n=0;i>n;n+=1)s[n]=str(n,a)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+c+"]":"["+s.join(",")+"]",gap=c,r}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(o=rep[n],(r=str(o,a))&&s.push(quote(o)+(gap?": ":":")+r));else for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r=str(o,a))&&s.push(quote(o)+(gap?": ":":")+r);return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+c+"}":"{"+s.join(",")+"}",gap=c,r}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;return"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var o;if(gap="",indent="","number"==typeof n)for(o=0;n>o;o+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,o,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(o=walk(r,n),void 0!==o?r[n]=o:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),JSON}({})},{}],2:[function(e,t,n){t.exports={LIB_VERSION:"1.2.0",LIB_KEY:"RXSTREAM201607",sendLimit:10,crossSubDomain:!0,loadTime:new Date,apiHost:"https://fenxi.ruixuesoft.com",appId:35}},{}],3:[function(e,t,n){function o(){return c.getSession("CURRENT_EVENT_ID")}function r(e){c.setSession("CURRENT_EVENT_ID",e)}var i=e("./config"),s=e("./utils"),c=e("./store"),a=e("./jMd5"),u=e("./JSON"),l={SENDING:"monitor_sending",SEND:"monitor_send",AUTHING:"monitor_authing",AUTH:"monitor_auth",SENDINGDATALEN:"monitor_sending_len"},f={_lockTimer:null,_lockState:!1,cbs:[],exec:function(e){var t=this;t.cbs.push(e),t._lockTimer||(t._lockTimer=setInterval(function(){t._lockState||t.cbs.length<=0||(t._lockState=!0,t.cbs.shift()(),s.log("队列函数数量："+t.cbs.length),0===t.cbs.length&&(clearInterval(t._lockTimer),t._lockTimer=null),t._lockState=!1)},0))}};t.exports={checkOption:{regChecks:{regName:/^((?!^uniqueId$|^originalId$|^time$|^properties$|^id$|^firstId$|^secondId$|^users$|^events$|^event$|^userId$|^date$|^datetime$)[a-zA-Z_$][a-zA-Z\d_$]{0,99})$/i},checkPropertiesKey:function(e){var t=this,n=!0;return s.each(e,function(e,o){t.regChecks.regName.test(o)||(n=!1)}),n},check:function(e,t){return"string"==typeof this[e]?this[this[e]](t):this[e](t)},str:function(e){return!!s.isString(e)||(s.log("请检查参数格式,必须是字符串"),!1)},properties:function(e){return s.validateProperties(e),!(e&&(s.isObject(e)?!this.checkPropertiesKey(e)&&(s.log("properties里的key必须是由字符串数字_组成"),1):(s.log("properties可以没有，但有的话必须是对象"),1)))},subject:function(e){return s.validateProperties(e),!(e&&(s.isObject(e)?!this.checkPropertiesKey(e)&&(s.log("subject里的key必须是由字符串数字_组成"),1):(s.log("subject可以没有，但有的话必须是对象"),1)))},object:function(e){return s.validateProperties(e),!(e&&(s.isObject(e)?!this.checkPropertiesKey(e)&&(s.log("object里的key必须是由字符串数字_组成"),1):(s.log("object可以没有，但有的话必须是对象"),1)))},propertiesMust:function(e){return s.validateProperties(e),void 0===e||!s.isObject(e)||s.isEmptyObject(e)?(s.log("properties必须是对象且有值"),!1):!!this.checkPropertiesKey(e)||(s.log("properties里的key必须是由字符串数字_组成"),!1)},event:function(e){return!(!s.isString(e)||!this.regChecks.regName.test(e))||(s.log("请检查参数格式,必须是字符串,且eventName必须是字符串_开头"),!1)},test_id:"str",group_id:"str",uniqueId:function(e){return!(!s.isString(e)||!/^.{1,255}$/.test(e))||(s.log("uniqueId必须是不能为空，且小于255位的字符串"),!1)},userId:function(e){return!!(s.isString(e)||s.isNumber(e)&&/^.{1,255}$/.test(e))||(s.log("userId必须是不能为空，且小于255位的字符串"),!1)}},globalContext:{state:{},eventPool:[],get:function(e){return e?this.state[e]:this.state},set:function(e,t){this.state[e]=t},getEventPool:function(){return s.localStorage.parse(i.LIB_KEY+"EventPool"+i.appId,[])},setEventPool:function(e){s.localStorage.set(i.LIB_KEY+"EventPool"+i.appId,u.stringify(e))},pushEvent:function(e){var t=this;e.sending=!1,f.exec(function(){e.cid=s.UUID();var n=o();n&&(e.pid=n),r(e.cid);var i=t.getEventPool();i.push(e),t.setEventPool(i)})}},check:function(e){var t=!0;for(var n in e)if(!this.checkOption.check(n,e[n]))return!1;return t},send:function(e){var t=this,n={properties:{},subject:{},object:{}};if(s.extend(n,e),s.isObject(e.properties)&&!s.isEmptyObject(e.properties)&&s.extend(n.properties,e.properties),s.isObject(e.subject)&&!s.isEmptyObject(e.subject)&&s.extend(n.subject,e.subject),s.isObject(e.object)&&!s.isEmptyObject(e.object)&&s.extend(n.object,e.object),!e.action||"profile"!==e.action.slice(0,7)){var o={b_dollar_screen_orientation:window.screen.msOrientation||(window.screen.orientation?window.screen.orientation.type:"unspecified")};s.extend(n.properties,o,c.getProps(),c.getSessionProps(),s.info.currentProps,s.info.properties()),s.extend(n.subject,c.getSubject(),c.getSessionSubject(),s.info.currentSubject),s.extend(n.object,c.getObject(),c.getSessionObject(),s.info.currentObject)}n.time=s.formatDate(new Date),s.searchObjDate(n),s.log("追踪到事件：\r\n"+u.stringify(n,null,4)),t.globalContext.pushEvent(n),setTimeout(function(){t.monitor(n.sly)},10)},monitor:function(e){var t=this;if(e)return void this.path(!0);var n=c.getSession(),o=n[l.AUTH],r=n[l.AUTHING],i=n[l.SENDING];o?i||this.path():r||this.auth(function(e){e&&t.path()})},auth:function(e){var t=i.apiHost+"/token/"+i.appId+"?randomId="+c.getSessionId()+"&domain="+c.getDomain();c.setSession(l.AUTHING,!0),s.ajax({url:t,type:"GET",cors:!0,success:function(e){var t=e,n=200===t.code;c.setSession(l.AUTH,n),n?c.setSession("token",t.token):s.log(t.msg||t.message)},error:function(e){s.log(e.status),s.log(e.statusText)},complete:function(t){c.setSession(l.AUTHING,!1);var n=c.getSession(l.AUTH);e&&e(n)}})},path:function(e,t){var n=this,o=c.getSession(),r=o[l.AUTH],a=o[l.SENDING];if(r&&!a){var u=i.apiHost+"/receive",f=i.sendLimit||1;c.setSession(l.SENDING,!0);var d=n.getWaitSendEvents(),p=d.length,b=[];if(!e&&p<f)return void c.setSession(l.SENDING,!1);s.each(d,function(e){e.sending=!0,b.push(e.cid)});var g=n.getPackingEvents(d);s.ajax({url:u,type:"POST",cors:!0,contentType:"application/json",data:g,success:function(e){try{s.isEmptyObject(e)||200===e.code?n.removeSendedEvents(b):402===e.code?(c.setSession(l.AUTH,!1),n.auth(function(e){e&&n.path()})):n.resetUnsendedEvents(b)}catch(e){s.log("事件发送返回消息错误")}},error:function(e){s.log(e.status),s.log(e.statusText)},complete:function(){c.setSession(l.SENDING,!1),s.log("事件发送完毕.")}}),e&&(n.removeSendedEvents(b),c.setSession(l.SENDING,!1))}},getWaitSendEvents:function(){var e=this,t=e.globalContext.getEventPool(),n=[];return n=s.arrayFilter(t,function(e,t,n){return!e.sending}),s.log("获取到待发送数据：\r\n"+u.stringify(n,null,4)),n},removeSendedEvents:function(e){var t=this;f.exec(function(){var n=t.globalContext.getEventPool();n=s.arrayFilter(n,function(t,n,o){return-1===e.indexOf(t.cid)}),t.globalContext.setEventPool(n)})},resetUnsendedEvents:function(e){var t=this;f.exec(function(){var n=t.globalContext.getEventPool();s.each(n,function(t){e.indexOf(t.cid)>=0&&(t.sending=!1)}),t.globalContext.setEventPool(n)})},getPackingEvents:function(e){var t=c.getSession(),n=t.token,o=t.sessionId,r=c.getDeviceId(),l=u.stringify(e),f=c.get(),d=u.stringify({appId:i.appId,uniqueId:r,userId:f?f.userId:"",events:l}),p=a(d+n),b=u.stringify({datatime:s.formatDate(new Date),lib:"js",sign:p,appId:i.appId,randomId:o,data:d});return s.log("发送事件数据：\r\n"+u.stringify(e,null,4)),b}}},{"./JSON":1,"./config":2,"./jMd5":5,"./store":8,"./utils":10}],4:[function(e,t,n){var o=e("./utils"),r=(e("./JSON"),document.documentElement),i=/^(A|BUTTON)$/,s={addEvent:window.addEventListener?function(e,t,n){e.addEventListener(t,n,!0)}:function(e,t,n){e.attachEvent("on"+t,n)},innerText:"innerText"in r?function(e){return e.innerText}:function(e){return e.textContent},iAncestorTag:function(e,t,n){t.test||(t=t.toUpperCase()),n||(n=document);do if(t.test?t.test(e.tagName):e.tagName===t)return e;while(e!==n&&(e=e.parentNode))},BUTTON_TYPE:{button:!0,image:!0,submit:!0,reset:!0},getClickPreset:function(e){e||(e=window.event);var t,n,r,c,a,u,l,f,d=e.target||e.srcElement,p=d.tagName;switch(p){case"INPUT":r=d.type,s.BUTTON_TYPE[r]&&(u=this.getDomSelector(d),f=this.getDomSize(d),l=this.getDomEventOffset(e,d),n={event:"btn_click",category:"click",properties:{b_dom_path:u,b_offset_x:l.offsetX,b_offset_y:l.offsetY,b_dom_width:f.width,b_dom_height:f.height,b_btn_type:r,b_btn_text:d.value,b_btn_name:d.getAttribute("name")||"",b_btn_value:d.getAttribute("value")||""}});break;default:var t=s.iAncestorTag(d,i);if(t)switch(u=this.getDomSelector(t),f=this.getDomSize(t),l=this.getDomEventOffset(e,t),t.tagName){case"BUTTON":c=o.trim(s.innerText(t)),n={event:"btn_click",category:"click",properties:{b_dom_path:u,b_offset_x:l.offsetX,b_offset_y:l.offsetY,b_dom_width:f.width,b_dom_height:f.height,b_btn_type:t.type,b_btn_text:c,b_btn_name:t.getAttribute("name")||"",b_btn_value:t.getAttribute("value")||""}};break;case"A":c=o.trim(s.innerText(t)),a=t.href,n={event:"link_click",category:"click",properties:{b_dom_path:u,b_offset_x:l.offsetX,b_offset_y:l.offsetY,b_dom_width:f.width,b_dom_height:f.height,b_link_url:a,b_link_text:c}}}else u=this.getDomSelector(d),f=this.getDomSize(d),l=this.getDomEventOffset(e,d),n={event:"element_click",category:"click",properties:{b_dom_path:u,b_offset_x:l.offsetX,b_offset_y:l.offsetY,b_dom_width:f.width,b_dom_height:f.height}}}return n&&(n.properties.b_clientX=e.clientX,n.properties.b_clientY=e.clientY),n},getPageSize:function(){var e,t;window.innerHeight&&window.scrollMaxY?(e=window.innerWidth+window.scrollMaxX,t=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(e=document.body.scrollWidth,t=document.body.scrollHeight):document.body&&(e=document.body.offsetWidth,t=document.body.offsetHeight);var n,o;return window.innerHeight?(n=window.innerWidth,o=window.innerHeight):document.documentElement&&document.documentElement.clientHeight?(n=document.documentElement.clientWidth,o=document.documentElement.clientHeight):document.body&&(n=document.body.clientWidth,o=document.body.clientHeight),{PageWidth:e<n?n:e,PageHeight:t<o?o:t,WinWidth:n,WinHeight:o}},getPageScroll:function(){var e,t;return window.pageYOffset?(t=window.pageYOffset,e=window.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(e=document.documentElement.scrollLeft,t=document.documentElement.scrollTop):document.body&&(e=document.body.scrollLeft,t=document.body.scrollTop),{b_scrollX:e,b_scrollY:t}},getDomSelector:function(e){var t=e.nodeName.toLowerCase();if("body"==t||"html"==t)return"body";var n=e.parentNode;if(e.getAttribute("id"))return this.getDomSelector(n)+">#"+e.getAttribute("id");if(("input"==t||"select"==t||"textarea"==t||"button"==t)&&e.getAttribute("name"))return this.getDomSelector(n)+">"+t+":input[name='"+e.getAttribute("name")+"']";for(var o=[],r=0;r<n.children.length;r++){var i=n.children[r];i.nodeName&&i.nodeName.toLowerCase()==t&&o.push(i)}for(r=0;r<o.length;r++)if(o[r]==e)return this.getDomSelector(n)+">"+t+":eq("+r+")"},getDomOffset:function(e){var t={top:0,left:0};return void 0!==e.getBoundingClientRect?(t=document.documentElement,e=e.getBoundingClientRect(),t={top:e.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||0),left:e.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):(t.top+=e.offsetTop,t.left+=e.offsetLeft,e.offsetParent&&(e=this.getDomOffset(e.offsetParent),t.top+=e.top,t.left+=e.left),t.top<0&&(t.top=0),t.left<0&&(t.left=0),t.top=isNaN(t.top)?0:parseInt(t.top,10),t.left=isNaN(t.left)?0:parseInt(t.left,10)),t.top=Math.round(t.top),t.left=Math.round(t.left),t},getDomEventOffset:function(e,t){var n={};if(e.offsetX&&e.offsetY)n.offsetX=e.offsetX,n.offsetY=e.offsetY;else{var o=t.getBoundingClientRect();n.offsetX=e.clientX-o.left,n.offsetY=e.clientY-o.top}return n},getDomSize:function(e){var t={};return t.width=e.offsetWidth,t.height=e.offsetHeight,t}};t.exports=s},{"./JSON":1,"./utils":10}],5:[function(e,t,n){var o=function(e,t){return e<<t|e>>>32-t},r=function(e,t){var n,o,r,i,s;return r=2147483648&e,i=2147483648&t,n=1073741824&e,o=1073741824&t,s=(1073741823&e)+(1073741823&t),n&o?2147483648^s^r^i:n|o?1073741824&s?3221225472^s^r^i:1073741824^s^r^i:s^r^i},i=function(e,t,n){return e&t|~e&n},s=function(e,t,n){return e&n|t&~n},c=function(e,t,n){return e^t^n},a=function(e,t,n){return t^(e|~n)},u=function(e,t,n,s,c,a,u){return e=r(e,r(r(i(t,n,s),c),u)),r(o(e,a),t)},l=function(e,t,n,i,c,a,u){return e=r(e,r(r(s(t,n,i),c),u)),r(o(e,a),t)},f=function(e,t,n,i,s,a,u){return e=r(e,r(r(c(t,n,i),s),u)),r(o(e,a),t)},d=function(e,t,n,i,s,c,u){return e=r(e,r(r(a(t,n,i),s),u)),r(o(e,c),t)},p=function(e){for(var t,n=e.length,o=n+8,r=(o-o%64)/64,i=16*(r+1),s=Array(i-1),c=0,a=0;a<n;)t=(a-a%4)/4,c=a%4*8,s[t]=s[t]|e.charCodeAt(a)<<c,a++;return t=(a-a%4)/4,c=a%4*8,s[t]=s[t]|128<<c,s[i-2]=n<<3,s[i-1]=n>>>29,s},b=function(e){var t,n,o="",r="";for(n=0;n<=3;n++)t=e>>>8*n&255,r="0"+t.toString(16),o+=r.substr(r.length-2,2);return o},g=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t};t.exports=function(e){var t,n,o,i,s,c,a,h,m,v=Array(),_=7,w=12,S=17,y=22,x=5,O=9,j=14,k=20,E=4,P=11,I=16,T=23,D=6,N=10,A=15,C=21;for(e=g(e),v=p(e),c=1732584193,a=4023233417,h=2562383102,m=271733878,t=0;t<v.length;t+=16)n=c,o=a,i=h,s=m,c=u(c,a,h,m,v[t+0],_,3614090360),m=u(m,c,a,h,v[t+1],w,3905402710),h=u(h,m,c,a,v[t+2],S,606105819),a=u(a,h,m,c,v[t+3],y,3250441966),c=u(c,a,h,m,v[t+4],_,4118548399),m=u(m,c,a,h,v[t+5],w,1200080426),h=u(h,m,c,a,v[t+6],S,2821735955),a=u(a,h,m,c,v[t+7],y,4249261313),c=u(c,a,h,m,v[t+8],_,1770035416),m=u(m,c,a,h,v[t+9],w,2336552879),h=u(h,m,c,a,v[t+10],S,4294925233),a=u(a,h,m,c,v[t+11],y,2304563134),c=u(c,a,h,m,v[t+12],_,1804603682),m=u(m,c,a,h,v[t+13],w,4254626195),h=u(h,m,c,a,v[t+14],S,2792965006),a=u(a,h,m,c,v[t+15],y,1236535329),c=l(c,a,h,m,v[t+1],x,4129170786),m=l(m,c,a,h,v[t+6],O,3225465664),h=l(h,m,c,a,v[t+11],j,643717713),a=l(a,h,m,c,v[t+0],k,3921069994),c=l(c,a,h,m,v[t+5],x,3593408605),m=l(m,c,a,h,v[t+10],O,38016083),h=l(h,m,c,a,v[t+15],j,3634488961),a=l(a,h,m,c,v[t+4],k,3889429448),c=l(c,a,h,m,v[t+9],x,568446438),m=l(m,c,a,h,v[t+14],O,3275163606),h=l(h,m,c,a,v[t+3],j,4107603335),a=l(a,h,m,c,v[t+8],k,1163531501),c=l(c,a,h,m,v[t+13],x,2850285829),m=l(m,c,a,h,v[t+2],O,4243563512),h=l(h,m,c,a,v[t+7],j,1735328473),a=l(a,h,m,c,v[t+12],k,2368359562),c=f(c,a,h,m,v[t+5],E,4294588738),m=f(m,c,a,h,v[t+8],P,2272392833),h=f(h,m,c,a,v[t+11],I,1839030562),a=f(a,h,m,c,v[t+14],T,4259657740),c=f(c,a,h,m,v[t+1],E,2763975236),m=f(m,c,a,h,v[t+4],P,1272893353),h=f(h,m,c,a,v[t+7],I,4139469664),a=f(a,h,m,c,v[t+10],T,3200236656),c=f(c,a,h,m,v[t+13],E,681279174),m=f(m,c,a,h,v[t+0],P,3936430074),h=f(h,m,c,a,v[t+3],I,3572445317),a=f(a,h,m,c,v[t+6],T,76029189),c=f(c,a,h,m,v[t+9],E,3654602809),m=f(m,c,a,h,v[t+12],P,3873151461),h=f(h,m,c,a,v[t+15],I,530742520),a=f(a,h,m,c,v[t+2],T,3299628645),c=d(c,a,h,m,v[t+0],D,4096336452),m=d(m,c,a,h,v[t+7],N,1126891415),h=d(h,m,c,a,v[t+14],A,2878612391),a=d(a,h,m,c,v[t+5],C,4237533241),c=d(c,a,h,m,v[t+12],D,1700485571),m=d(m,c,a,h,v[t+3],N,2399980690),h=d(h,m,c,a,v[t+10],A,4293915773),a=d(a,h,m,c,v[t+1],C,2240044497),c=d(c,a,h,m,v[t+8],D,1873313359),m=d(m,c,a,h,v[t+15],N,4264355552),h=d(h,m,c,a,v[t+6],A,2734768916),a=d(a,h,m,c,v[t+13],C,1309151649),c=d(c,a,h,m,v[t+4],D,4149444226),m=d(m,c,a,h,v[t+11],N,3174756917),h=d(h,m,c,a,v[t+2],A,718787259),a=d(a,h,m,c,v[t+9],C,3951481745),c=r(c,n),a=r(a,o),h=r(h,i),m=r(m,s);return(b(c)+b(a)+b(h)+b(m)).toLowerCase()}},{}],6:[function(e,t,n){var o=e("./utils"),r=e("./rxStream"),i=(e("./JSON"),{sendLimit:10,crossSubDomain:!0,loadTime:1*new Date,autoTrack:!0,showLog:!1}),s=window[r.config.LIB_KEY]||r.config.LIB_KEY;s&&(s=window[s]),s.para&&o.extend(i,s.para),i.loadTime=s.lt||1*new Date,o.extend(s,r),s.init(i)},{"./JSON":1,"./rxStream":7,"./utils":10}],7:[function(e,t,n){var o=e("./utils"),r=e("./store"),i=e("./core"),s=e("./dom"),c=e("./config"),a=(e("./JSON"),e("./uaDetector")),u=e("./widget/heatmap/parser"),l={};l._=o,l.config=c,l.core=i;var f={element_click:"click",link_click:"click",btn_click:"click",view_page:"load",leave_page:"load"},d={getUtm:function(){return o.info.campaignParams()},getStayTime:function(){return(new Date-c.loadTime)/1e3},setInitReferrer:function(){var e=document.referrer;r.setPropsOnce({b_dollar_page_referrer:e,b_dollar_referrer_domain:o.info.referringDomain(e)})},setSessionReferrer:function(){var e=document.referrer;r.setSessionPropsOnce({b_dollar_session_referrer:e,b_dollar_session_referrer_domain:o.info.referringDomain(e)})},setDefaultAttr:function(){var e=document.body&&document.body.getElementsByTagName("h1"),t="";e&&e.length&&e.length>0&&(t=s.innerText(e[0])),o.info.register({b_dollar_page_url:location.href,b_dollar_referrer:document.referrer,b_dollar_referring_domain:o.info.referringDomain(document.referrer),b_dollar_page_url_path:location.pathname,b_dollar_page_h1:t,b_dollar_page_title:document.title})},autoTrack:function(){var e=this,t=o.info.campaignParams();s.addEvent(window,"load",function(){var n=d.getStayTime();i.globalContext.set("pageLoadTime",n),e.track("view_page",{properties:o.extend({b_page_load_time:n},t),subject:{},object:{}}),o.log("页面加载时间："+n)}),s.addEvent(window,"orientationchange",function(){180!=window.orientation&&0!=window.orientation||r.setProps({b_dollar_screen_orientation:"portrait"}),90!=window.orientation&&-90!=window.orientation||r.setProps({b_dollar_screen_orientation:"landscape"})});var n=1*new Date;s.addEvent(document,"click",function(t){var r=1*new Date;if(!(r-n<=1e3)){n=r;var i=s.getClickPreset(t);i&&e.track(i.event,{properties:o.extend({},i.properties),subject:{},object:{}})}}),s.addEvent(window,"beforeunload",function(t){var n=i.globalContext.get("pageLoadTime"),r=d.getStayTime(),c=s.getPageScroll(),a=s.getPageSize(),u=o.extend({b_page_load_time:n,b_page_stay_time:r,b_page_height:a.PageHeight,b_page_width:a.PageWidth},c);e.track("leave_page",{properties:u,subject:{},object:{}},!0),setTimeout(function(){},600)}),s.addEvent(window,"unload",function(e){setTimeout(function(){},100)})}};l.quick=function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e.slice(1);return"string"==typeof t&&d[t]?d[t].apply(this,n):void("function"==typeof t?t.apply(this,n):o.log("quick方法中没有这个功能"+e[0]))},l.autoTrack=function(){d.autoTrack.call(this)},l.track=function(e,t,n){if(i.check({event:e,properties:t.properties,subject:t.subject,object:t.object})){var r=f[e]||"customize";i.send(o.extend({action:"track",event:e,category:r,sly:n},t))}},l.setProfile=function(e){i.check({propertiesMust:e})&&i.send({action:"profile_set",properties:e})},l.setOnceProfile=function(e){i.check({propertiesMust:e})&&i.send({action:"profile_set_once",properties:e})},l.appendProfile=function(e){i.check({propertiesMust:e})&&(o.each(e,function(t,n){o.isString(t)?e[n]=[t]:o.isArray(t)||(delete e[n],o.log("appendProfile属性的值必须是字符串或者数组"))}),o.isEmptyObject(e)||i.send({action:"profile_append",properties:e}))},l.incrementProfile=function(e){function t(e){for(var t in e)if(!/-*\d+/.test(String(e[t])))return!1;return!0}var n=e;o.isString(e)&&(e={},e[n]=1),i.check({propertiesMust:e})&&(t(e)?i.send({action:"profile_increment",properties:e}):o.log("profile_increment的值只能是数字"))},l.deleteProfile=function(){i.send({action:"profile_delete"}),r.set("uniqueId",o.UUID())},l.unsetProfile=function(e){var t=e,n={};o.isString(e)&&(e=[],e.push(t)),o.isArray(e)?(o.each(e,function(e){o.isString(e)?n[e]=!0:o.log("profile_unset给的数组里面的值必须时string,已经过滤掉",e)}),i.send({action:"profile_unset",properties:n})):o.log("profile_unset的参数是数组")},l.identify=function(e,t){void 0===e?r.set("uniqueId",o.UUID()):i.check({uniqueId:e})?!0===t?r.set("uniqueId",e):r.change("uniqueId",e):o.log("identify的参数必须是字符串")},l.userIdentify=function(e,t,n){void 0===e?(r.set("uniqueId",o.UUID()),r.set("userId",""),r.clearSubject()):i.check({userId:e,subject:t})?!0===n?(r.set("userId",e),o.isEmptyObject(t)||r.setSubject(t)):(r.change("userId",e),r.change("subject",t)):o.log("userIdentify的参数输入有误")},l.trackSignup=function(e,t,n){n=n||{subject:{},object:{},properties:{}},i.check({userId:e,event:t,properties:n.properties||{},subject:n.subject||{},object:n.object||{}})&&(l.userIdentify(e,{},!0),i.send({action:"trackSignup",event:t,properties:n.properties||{},subject:n.subject||{},object:n.object||{}}))},l.trackAbtest=function(e,t){i.check({test_id:e,group_id:t})&&i.send({action:"trackAbtest",properties:{test_id:e,group_id:t}})},l.register=function(e){i.check({properties:e})?r.setProps(e):o.log("register输入的参数有误")},l.registerOnce=function(e){i.check({properties:e})?r.setPropsOnce("props",e):o.log("registerOnce输入的参数有误")},l.registerSession=function(e){i.check({properties:e})?r.setSessionProps(e):o.log("registerSession输入的参数有误")},l.registerSessionOnce=function(e){i.check({properties:e})?r.setSessionPropsOnce(e):o.log("registerSessionOnce输入的参数有误")},l.getSessionId=function(){return r.getSessionId()},l.getUtils=function(){return o},l.getUADetector=function(){return a},l.preInit=function(){},l.inited=function(){l.loaded=!0},l.init=function(e){var t=this;t.preInit(),e&&!o.isEmptyObject(e)&&o.extend(t.config,e),r.init(),t._rx&&o.each(t._rx,function(e){t[e[0]].apply(t,Array.prototype.slice.call(e[1]))}),!0===t.config.autoTrack&&t.autoTrack(),u.parser(),t.inited()},t.exports=l},{"./JSON":1,"./config":2,"./core":3,"./dom":4,"./store":8,"./uaDetector":9,"./utils":10,"./widget/heatmap/parser":11}],8:[function(e,t,n){var o=e("./config"),r=e("./utils"),i=e("./JSON"),s=o.LIB_KEY;t.exports={getProps:function(){return this._state.props},getSessionProps:function(){return this._sessionState.props},getSubject:function(){return this._state.subject},getObject:function(){return this._state.object},getSessionSubject:function(){return this._sessionState.subject||{}},getSessionObject:function(){return this._sessionState.object||{}},getDeviceId:function(){return this._state.uniqueId},getSessionId:function(){return this._sessionState.sessionId},getDomain:function(){var e=this._state.domain;return e||(e=document.domain||window.location.host,this.setOnce("domain",e)),e},toState:function(e){var t=null;null!==e&&"object"==typeof(t=i.parse(e))&&(this._state=t)},initSessionState:function(){var e=r.cookie.get(s+"session"),t=null;null!==e&&"object"==typeof(t=i.parse(e))&&(this._sessionState=t)},get:function(e){return e?this._state[e]:this._state},getSession:function(e){return e?this._sessionState[e]:this._sessionState},set:function(e,t){this._state[e]=t,this.save()},setOnce:function(e,t){e in this._state||this.set(e,t)},setSession:function(e,t){this._sessionState[e]=t,this.sessionSave()},setSessionOnce:function(e,t){e in this._sessionState||this.setSession(e,t)},change:function(e,t){this._state[e]=t},sessionChange:function(e,t){this._sessionState[e]=t},setSessionProps:function(e){this._setSessionProps("props",e)},setSessionPropsOnce:function(e){this._setSessionPropsOnce("props",e)},setSessionSubject:function(e){this._setSessionProps("subject",e)},setSessionSubjectOnce:function(e){this._setSessionPropsOnce("subject",e)},clearSessionSubject:function(){this._sessionState.subject={},this.sessionSave()},setSessionObject:function(e){this._setSessionProps("object",e)},setSessionObjectOnce:function(e){this._setSessionPropsOnce("object",e)},clearSessionObject:function(){this._sessionState.object={},this.sessionSave()},setProps:function(e){this._setProps("props",e)},setPropsOnce:function(e){this._setPropsOnce("props",e)},setSubject:function(e){this._setProps("subject",e)},setSubjectOnce:function(e){this._setPropsOnce("subject",e)},clearSubject:function(){this._state.subject={},this.save()},setObject:function(e){this._setProps("subject",e)},setObjectOnce:function(e){this._setPropsOnce("subject",e)},clearObject:function(){this._state.object={},this.save()},_setProps:function(e,t){var n=this._state[e]||{};r.extend(n,t),this.set(e,n)},_setPropsOnce:function(e,t){var n=this._state[e]||{};r.coverExtend(n,t),this.set(e,n)},_setSessionProps:function(e,t){var n=this._sessionState[e]||{};r.extend(n,t),this.setSession(e,n)},_setSessionPropsOnce:function(e,t){var n=this._sessionState[e]||{};r.coverExtend(n,t),this.setSession(e,n)},sessionSave:function(e){e&&(this._sessionState=e),r.cookie.set(s+"session",i.stringify(this._sessionState),0,o.crossSubDomain)},save:function(){o.crossSubDomain?r.cookie.set(s+"jssdkcross",i.stringify(this._state),this._state.expires||730,!0):r.cookie.set(s+"jssdk",i.stringify(this._state),this._state.expires||730,!1)},_sessionState:{props:{},subject:{},object:{}},_state:{props:{},subject:{},object:{}},init:function(){var e=r.cookie.get(s+"jssdk"),t=r.cookie.get(s+"jssdkcross"),n=null;o.crossSubDomain?(n=t,null!==e&&(r.log("在根域且子域有值，删除子域的cookie"),r.cookie.remove(s+"jssdk",!1),r.cookie.remove(s+"jssdk",!0)),null===n&&null!==e&&(r.log("在根域且根域没值，子域有值，根域＝子域的值",e),n=e)):(r.log("在子域"),n=e),this.initSessionState(),null!==n?(this.toState(n),o.crossSubDomain&&null===t&&(r.log("在根域且根域没值，保存当前值到cookie中"),this.save())):(r.log("没有值，set值"),this.set("uniqueId",r.UUID())),this.setSessionOnce("sessionId",r.UUID())}}},{"./JSON":1,"./config":2,"./utils":10}],9:[function(e,t,n){function o(e){return Object.prototype.toString.call(e)}function r(e){return"[object Object]"===o(e)}function i(e){return"[object Function]"===o(e)}function s(e,t){for(var n=0,o=e.length;n<o&&!1!==t.call(e,e[n],n);n++);}function c(e){if(!v.test(e))return null;var t,n,o,r,i;if(-1!==e.indexOf("trident/")&&(t=/\btrident\/([0-9.]+)/.exec(e))&&t.length>=2){o=t[1];var s=t[1].split(".");s[0]=parseInt(s[0],10)+4,i=s.join(".")}t=v.exec(e),r=t[1];var c=t[1].split(".");return void 0===i&&(i=r),c[0]=parseInt(c[0],10)-4,n=c.join("."),void 0===o&&(o=n),{browserVersion:i,browserMode:r,engineVersion:o,engineMode:n,compatible:o!==n}}function a(e){if(b)try{var t=b.twGetRunPath.toLowerCase(),n=b.twGetSecurityID(p),o=b.twGetVersion(n);if(t&&-1===t.indexOf(e))return!1;if(o)return{version:o}}catch(e){}}function u(e,t,n){var s=i(t)?t.call(null,n):t;if(!s)return null;var c={name:e,version:d,codename:""},a=o(s);if(!0===s)return c;if("[object String]"===a){if(-1!==n.indexOf(s))return c}else{if(r(s))return s.hasOwnProperty("version")&&(c.version=s.version),c;if(s.exec){var u=s.exec(n);if(u)return u.length>=2&&u[1]?c.version=u[1].replace(/_/g,"."):c.version=d,c}}}function l(e,t,n,o){var r=k;s(t,function(t){var n=u(t[0],t[1],e);if(n)return r=n,!1}),n.call(o,r.name,r.version)}var f=(e("./JSON"),{}),d="-1",p=window,b=p.external,g=p.navigator.userAgent||"",h=p.navigator.appVersion||"",m=p.navigator.vendor||"",v=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,_=/\bbb10\b.+?\bversion\/([\d.]+)/,w=/\bblackberry\b.+\bversion\/([\d.]+)/,S=/\bblackberry\d+\/([\d.]+)/,y=[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var t=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:t.test(e)?t:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],x=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["ios",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var t=e.match(_)||e.match(w)||e.match(S);return t?{version:t[1]}:"blackberry"}]],O=[["edgehtml",/edge\/([0-9.]+)/],["trident",v],["blink",function(){return"chrome"in p&&"CSS"in p&&/\bapplewebkit[\/]?([0-9.+]+)/;
}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var t;if(t=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/))return{version:t[1]+"."+t[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],j=[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=a("theworld");return void 0!==e?e:"theworld"}],["360",function(e){var t=a("360se");return void 0!==t?t:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(b&&(b.mxVersion||b.max_version))return{version:b.mxVersion||b.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var t;try{b&&b.LiebaoGetVersion&&(t=b.LiebaoGetVersion())}catch(e){}return{version:t||d}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",v],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var t=/\bopera.+version\/([0-9.ab]+)/,n=/\bopr\/([0-9.]+)/;return t.test(e)?t:n}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var t=e.match(_)||e.match(w)||e.match(S);return t?{version:t[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]],k={name:"na",version:d};f=function(e){e=(e||"").toLowerCase();var t={};l(e,y,function(e,n){var o=parseFloat(n);t.device={name:e,version:o,fullVersion:n},t.device[e]=o},t),l(e,x,function(e,n){var o=parseFloat(n);t.os={name:e,version:o,fullVersion:n},t.os[e]=o},t);var n=c(e);return l(e,O,function(e,o){var r=o;n&&(o=n.engineVersion||n.engineMode,r=n.engineMode);var i=parseFloat(o);t.engine={name:e,version:i,fullVersion:o,mode:parseFloat(r),fullMode:r,compatible:!!n&&n.compatible},t.engine[e]=i},t),l(e,j,function(e,o){var r=o;n&&("ie"===e&&(o=n.browserVersion),r=n.browserMode);var i=parseFloat(o);t.browser={name:e,version:i,fullVersion:o,mode:parseFloat(r),fullMode:r,compatible:!!n&&n.compatible},t.browser[e]=i},t),t}(g+" "+h+" "+m),t.exports=f},{"./JSON":1}],10:[function(e,n,o){var r=e("./config"),i=e("./JSON"),s=e("./uaDetector"),c=Array.prototype,a=Function.prototype,u=Object.prototype,l=c.slice,f=u.toString,d=u.hasOwnProperty,p=window.navigator,b=window.document,g=p.userAgent,h=r.LIB_VERSION,m=(r.LIB_KEY,a.bind,c.forEach),v=c.indexOf,_=Array.isArray,w={},S={},y=S.each=function(e,t,n){if(null==e)return!1;if(m&&e.forEach===m)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,r=e.length;o<r;o++)if(o in e&&t.call(n,e[o],o,e)===w)return!1}else for(var i in e)if(d.call(e,i)&&t.call(n,e[i],i,e)===w)return!1};S.extend=function(e){return y(l.call(arguments,1),function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e},S.coverExtend=function(e){return y(l.call(arguments,1),function(t){for(var n in t)void 0!==t[n]&&void 0===e[n]&&(e[n]=t[n])}),e},S.isArray=_||function(e){return"[object Array]"===f.call(e)},S.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},S.isArguments=function(e){return!(!e||!d.call(e,"callee"))},S.toArray=function(e){return e?e.toArray?e.toArray():S.isArray(e)?l.call(e):S.isArguments(e)?l.call(e):S.values(e):[]},S.values=function(e){var t=[];return null==e?t:(y(e,function(e){t[t.length]=e}),t)},S.include=function(e,t){var n=!1;return null==e?n:v&&e.indexOf===v?-1!=e.indexOf(t):(y(e,function(e){if(n||(n=e===t))return w}),n)},S.includes=function(e,t){return-1!==e.indexOf(t)},S.arrayFilter=function(e,t){for(var n=-1,o=e?e.length:0,r=0,i=[];++n<o;){var s=e[n];t(s,n,e)&&(i[r++]=s)}return i},S.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},S.isObject=function(e){return"[object Object]"==f.call(e)},S.isEmptyObject=function(e){if(S.isObject(e)){for(var t in e)if(d.call(e,t))return!1;return!0}return!1};var x=/^\s+|\s+$/;S.trim="".trim?function(e){return e.trim()}:function(e){return e.replace(x)},S.isUndefined=function(e){return void 0===e},S.isString=function(e){return"[object String]"==f.call(e)},S.isDate=function(e){return"[object Date]"==f.call(e)},S.isBoolean=function(e){return"[object Boolean]"==f.call(e)},S.isNumber=function(e){return"[object Number]"==f.call(e)&&/[\d\.]+/.test(String(e))},S.encodeDates=function(e){return S.each(e,function(t,n){S.isDate(t)?e[n]=S.formatDate(t):S.isObject(t)&&(e[n]=S.encodeDates(t))}),e},S.formatDate=function(e){function t(e){return e<10?"0"+e:e}return[e.getFullYear(),"-",t(e.getMonth()+1),"-",t(e.getDate()),"T",t(e.getHours()),":",t(e.getMinutes()),":",t(e.getSeconds()),".",t(e.getMilliseconds()),"+08:00"].join("")},S.searchObjDate=function(e){S.isObject(e)&&S.each(e,function(t,n){S.isObject(t)?S.searchObjDate(e[n]):S.isDate(t)&&(e[n]=S.formatDate(t))})},S.validateProperties=function(e){return S.isObject(e)?(S.each(e,function(t,n){if(S.isArray(t)){var o=[];S.each(t,function(e){S.isString(e)?o.push(e):S.log("您的数据-",t,"的数组里的值必须是字符串,已经将其删除")}),0!==o.length?e[n]=o:(delete e[n],S.log("已经删除空的数组"))}S.isString(t)||S.isNumber(t)||S.isDate(t)||S.isBoolean(t)||S.isArray(t)||(S.log("您的数据-",t,"-格式不满足要求，我们已经将其删除"),delete e[n])}),e):e},S.generateNewProperties=function(e){var t={};return S.each(e,function(e,n){S.isString(e)&&e.length>0&&(t[n]=e)}),t},S.utf8Encode=function(e){e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var t,n,o,r="",i=0;for(t=n=0,i=e.length,o=0;o<i;o++){var s=e.charCodeAt(o),c=null;s<128?n++:c=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==c&&(n>t&&(r+=e.substring(t,n)),r+=c,t=n=o+1)}return n>t&&(r+=e.substring(t,e.length)),r},S.detector=s,S.base64Encode=function(e){var t,n,o,r,i,s,c,a,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,f=0,d="",p=[];if(!e)return e;e=S.utf8Encode(e);do t=e.charCodeAt(l++),n=e.charCodeAt(l++),o=e.charCodeAt(l++),a=t<<16|n<<8|o,r=a>>18&63,i=a>>12&63,s=a>>6&63,c=63&a,p[f++]=u.charAt(r)+u.charAt(i)+u.charAt(s)+u.charAt(c);while(l<e.length);switch(d=p.join(""),e.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"="}return d},S.UUID=function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},t=function(){return Math.random().toString(16).replace(".","")},n=function(e){function t(e,t){var n,o=0;for(n=0;n<t.length;n++)o|=i[n]<<8*n;return e^o}var n,o,r=g,i=[],s=0;for(n=0;n<r.length;n++)o=r.charCodeAt(n),i.unshift(255&o),i.length>=4&&(s=t(s,i),i=[]);return i.length>0&&(s=t(s,i)),s.toString(16)};return function(){var o=(screen.height*screen.width).toString(16);return e()+"-"+t()+"-"+n()+"-"+o+"-"+e()}}(),S.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+t+"=([^&#]*)",o=new RegExp(n),r=o.exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1]).replace(/\+/g," ")},S.concatQueryParam=function(e,t,n){var o="";-1!=e.indexOf("#")&&(o=e.split("#")[1],e=e.split("#")[0]),void 0!=n&&null!=n||(n="");var r="[\\?&]"+t+"=([^&#]*)",i=new RegExp(r),s=i.exec(e);return e=null===s||s&&"string"!=typeof s[1]&&s[1].length?-1!=e.indexOf("?")||-1!=e.indexOf("=")?e+"&"+t+"="+n:e+"?"+t+"="+n:e.replace(s[0],s[0].replace(s[1],n)),""!=o&&(e+="#"+o),e},S.xhr=function(e){var n;if(e&&(n=new XMLHttpRequest,n="withCredentials"in n?n:"undefined"!=typeof XDomainRequest?new XDomainRequest:t),XMLHttpRequest&&(n=new XMLHttpRequest),window.ActiveXObject)try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}return!("setRequestHeader"in n)&&(n.setRequestHeader=function(){}),n},S.ajax=function(e){function t(e){try{return i.parse(e)}catch(e){return{}}}var n=S.xhr(e.cors);if(e.type||(e.type=e.data?"POST":"GET"),e=S.extend({success:function(){},error:function(e,t,n){S.log(e.status),S.log(e.readyState),S.log(t)},complete:function(e){}},e),n.onreadystatechange=function(){4==n.readyState&&(n.status>=200&&n.status<300||304==n.status?e.success(t(n.responseText)):e.error(n),e.complete(n),n.onreadystatechange&&(n.onreadystatechange=null),n.onload&&(n.onload=null))},n.open(e.type,e.url,void 0===e.async||e.async),S.isObject(e.header))for(var o in e.header)n.setRequestHeader(o,e.header[o]);e.data&&(n.setRequestHeader("X-Requested-With","XMLHttpRequest"),"application/json"===e.contentType?n.setRequestHeader("Content-type","application/json; charset=UTF-8"):n.setRequestHeader("Content-type","application/x-www-form-urlencoded")),n.send(e.data||null)},S.log=function(){if(r.showLog&&"object"==typeof console&&console.log)try{console.log.apply(console,arguments)}catch(e){console.log(arguments[0])}},S.cookie={get:function(e){for(var t=e+"=",n=b.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return null},set:function(e,t,n,o,r){var i="",s="",c="";if(n=void 0===n?730:n,o){var a=b.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),u=a?a[0]:"";i=u?"; domain=."+u:""}if(0!==n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toGMTString()}r&&(c="; secure"),b.cookie=e+"="+encodeURIComponent(t)+s+"; path=/"+i+c},remove:function(e,t){S.cookie.set(e,"",-1,t)}},S.localStorage={get:function(e){return window.localStorage.getItem(e)},parse:function(e,t){var n=t;try{var o=S.localStorage.get(e);n=i.parse(o)||t||{}}catch(e){}return n},set:function(e,t){(S.isArray(t)||S.isObject(t))&&(t=i.stringify(t)),window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)}},S.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",n={};return S.each(e,function(e){t=S.getQueryParam(location.href,e),t.length&&(n[e]=t)}),n},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":0===e.search("https?://(.*)sogou.com")?"sogou":0===e.search("https?://(.*)so.com")?"360so":null},browser:function(e,t,n){var t=t||"";return n||S.includes(e," OPR/")?S.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":S.includes(e,"IEMobile")||S.includes(e,"WPDesktop")?"Internet Explorer Mobile":S.includes(e,"Edge")?"Microsoft Edge":S.includes(e,"FBIOS")?"Facebook Mobile":S.includes(e,"Chrome")?"Chrome":S.includes(e,"CriOS")?"Chrome iOS":S.includes(t,"Apple")?S.includes(e,"Mobile")?"Mobile Safari":"Safari":S.includes(e,"Android")?"Android Mobile":S.includes(e,"Konqueror")?"Konqueror":S.includes(e,"Firefox")?"Firefox":S.includes(e,"MSIE")||S.includes(e,"Trident/")?"Internet Explorer":S.includes(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,n){var o=S.info.browser(e,t,n),r={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/Chrome\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},i=r[o];if(void 0==i)return null;var s=e.match(i);return s?String(parseFloat(s[s.length-2])):null},os:function(){var e=g;return/Windows/i.test(e)?/Phone/.test(e)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":""},device:function(e){return/iPad/.test(e)?"iPad":/iPod/i.test(e)?"iPod":/iPhone/i.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Windows Phone/i.test(e)?"Windows Phone":/Windows/i.test(e)?"Windows":/Macintosh/i.test(e)?"Macintosh":/Android/i.test(e)?"Android":/Linux/i.test(e)?"Linux":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},getBrowser:function(){return{b_dollar_browser:s.browser.name,b_dollar_browser_version:String(s.browser.version)}},getWindow:function(){var e,t;return window.innerWidth?e=window.innerWidth:b.body&&b.body.clientWidth&&(e=b.body.clientWidth),window.innerHeight?t=window.innerHeight:b.body&&b.body.clientHeight&&(t=b.body.clientHeight),b.documentElement&&b.documentElement.clientHeight&&b.documentElement.clientWidth&&(t=b.documentElement.clientHeight,e=b.documentElement.clientWidth),{b_dollar_win_width:e,b_dollar_win_height:t}},properties:function(){var e=b.body&&b.body.getElementsByTagName("h1"),t="";return e&&e.length&&e.length>0&&(t=e[0].innerText||e.textContent||""),S.extend(S.generateNewProperties({b_dollar_os:s.os.name,b_dollar_os_version:s.os.fullVersion,b_dollar_device:s.device.name,b_dollar_device_version:s.device.fullVersion}),{b_dollar_screen_height:screen.height,b_dollar_screen_width:screen.width,b_dollar_page_title:b.title,b_dollar_page_h1:t,b_dollar_page_referrer:b.referrer,b_dollar_page_url:location.href,b_dollar_page_url_path:location.pathname,b_dollar_lib:"js",b_dollar_lib_version:h},S.info.getBrowser())},currentProps:{},register:function(e){S.extend(S.info.currentProps,e)},currentSubject:{},registerSubject:function(e){S.extend(S.info.currentSubject,e)},currentObject:{},registerObject:function(e){S.extend(S.info.currentObject,e)}},S.urlQueryString=function(e,t,n,o){var r,i;return t&&"string"==typeof t||(t=window.location[o?"hash":"search"]),(i=t.indexOf(o?"#":"?"))<0?null:(r="&"+t.slice(i+1),r&&new RegExp("&"+e+"=([^&#]*)").test(r)?n?RegExp.$1:unescape(RegExp.$1):null)},n.exports=S},{"./JSON":1,"./config":2,"./uaDetector":9}],11:[function(e,t,n){var o=e("../../utils"),r=e("../../config"),i={key:function(){return this._key||(this._key=r.LIB_KEY+"HM"),this._key},jsUrl:"http://stream.ruixuesoft.com/sdk/src/widget/heatmap/index.js",cssUrl:"http://stream.ruixuesoft.com/sdk/src/widget/heatmap/index.css",parser:function(){o.urlQueryString(this.key())&&this.loadResource()},loadResource:function(){var e=document.getElementsByTagName("script")[0],t=document.getElementById(r.LIB_KEY+"_heatmap_js");t||(t=document.createElement("script"),t.id=r.LIB_KEY+"_heatmap_js",t.setAttribute("src",this.jsUrl),e.parentNode.insertBefore(t,e));var n=document.getElementById(r.LIB_KEY+"_heatmap_css");n||(n=document.createElement("link"),n.id=r.LIB_KEY+"_heatmap_css",n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",this.cssUrl),e.appendChild(n))}};t.exports=i},{"../../config":2,"../../utils":10}]},{},[6]);